(function(){"use strict";var k=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("k-grid",[t.showSelect?e("k-column",{attrs:{width:t.uiWidth.select}},[e("k-select-field",{attrs:{type:"select",options:t.types,empty:!1},on:{input:t.inputType},model:{value:t.data.type,callback:function(i){t.$set(t.data,"type",i)},expression:"data.type"}})],1):t._e(),e("k-column",{attrs:{width:t.uiWidth.field}},[t.data.type==="url"?e("k-url-field",{attrs:{placeholder:"https://example.com/"},model:{value:t.data.value,callback:function(i){t.$set(t.data,"value",i)},expression:"data.value"}}):t.data.type==="page"?e("k-pages-field",{attrs:{search:!0,endpoints:{field:this.endpoints.field+"/link-pages"}},model:{value:t.data.value,callback:function(i){t.$set(t.data,"value",i)},expression:"data.value"}}):t.data.type==="file"?e("k-files-field",{attrs:{search:!0,endpoints:{field:this.endpoints.field+"/link-files"}},model:{value:t.data.value,callback:function(i){t.$set(t.data,"value",i)},expression:"data.value"}}):t.data.type==="email"?e("k-email-field",{model:{value:t.data.value,callback:function(i){t.$set(t.data,"value",i)},expression:"data.value"}}):t.data.type==="tel"?e("k-tel-field",{model:{value:t.data.value,callback:function(i){t.$set(t.data,"value",i)},expression:"data.value"}}):e("k-box",{attrs:{theme:"negative",text:t.$t("error.type",{type:t.data.type})}})],1)],1)},m=[],X="";function o(t,n,e,i,r,f,v,B){var a=typeof t=="function"?t.options:t;n&&(a.render=n,a.staticRenderFns=e,a._compiled=!0),i&&(a.functional=!0),f&&(a._scopeId="data-v-"+f);var l;if(v?(l=function(s){s=s||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,!s&&typeof __VUE_SSR_CONTEXT__!="undefined"&&(s=__VUE_SSR_CONTEXT__),r&&r.call(this,s),s&&s._registeredComponents&&s._registeredComponents.add(v)},a._ssrRegister=l):r&&(l=B?function(){r.call(this,(a.functional?this.parent:this).$root.$options.shadowRoot)}:r),l)if(a.functional){a._injectStyles=l;var N=a.render;a.render=function(U,_){return l.call(_),N(U,_)}}else{var h=a.beforeCreate;a.beforeCreate=h?[].concat(h,l):[l]}return{exports:t,options:a}}const $={props:{value:Object,options:Array,endpoints:Object,width:String},data:function(){return{data:this.value,updating:!1}},computed:{showSelect:function(){return this.types.length>1},widthPercent:function(){var t=this.width.split("/"),n=t[0]||1,e=t[1]||1;return n/e*100},uiWidth:function(){var t=this.widthPercent>=50;return{select:t?"1/4":"1/1",field:this.showSelect?t?"3/4":"1/1":null}},types:function(){return this.options.map(function(t){return{value:t,text:this.$t(t)}}.bind(this))}},methods:{inputType:function(){this.data.value=void 0}},watch:{data:{deep:!0,handler:function(t){this.updating||this.$emit("input",t)}},value:function(t){this.updating=!0,Object.assign(this.data,t),this.$nextTick(function(){this.updating=!1}.bind(this))}}},u={};var g=o($,k,m,!1,y,"3501e57e",null,null);function y(t){for(let n in u)this[n]=u[n]}var b=function(){return g.exports}(),w=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("section",{staticClass:"k-structure-form"},[e("k-form",{staticClass:"k-structure-form-fields",attrs:{fields:t.fields},on:{input:function(i){return t.$emit("input",t.data)}},model:{value:t.data,callback:function(i){t.data=i},expression:"data"}})],1)},S=[];const x={props:{value:Object,types:Object},data:function(){return{data:this.value}},computed:{fields:function(){var t={},n={text:{width:"1/2",type:"text",label:this.$t("label.text")},popup:{width:"1/4",type:"toggle",label:this.$t("label.popup")},hash:{width:"1/4",type:"text",label:this.$t("label.fragment"),placeholder:this.$t("placeholder.elementid")}};for(var e in this.types)n[e]&&this.types[e]&&(t[e]=Object.assign(n[e],this.types[e]));for(var e in n)!t[e]&&this.types[e]!==!1&&(t[e]=n[e]);return t}},watch:{value:function(t){Object.assign(this.data,t)}}},c={};var j=o(x,w,S,!1,O,null,null,null);function O(t){for(let n in c)this[n]=c[n]}var C=function(){return j.exports}(),T=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("k-field",t._b({staticClass:"k-link-field"},"k-field",t.$props,!1),[t.hasSettings?e("k-button",{attrs:{slot:"options",icon:t.isMainScreen?"cog":"cancel"},on:{click:t.switchScreen},slot:"options"},[t._v(" "+t._s(t.isMainScreen?t.$t("label.settings"):t.$t("label.close"))+" ")]):t._e(),t.isMainScreen?e("LinkSelect",{attrs:{width:t.width,options:t.options,endpoints:t.endpoints},on:{input:t.emitInput},model:{value:t.link,callback:function(i){t.link=i},expression:"link"}}):e("LinkSettings",{attrs:{types:t.settings},on:{input:t.emitInput},model:{value:t.settingsData,callback:function(i){t.settingsData=i},expression:"settingsData"}})],1)},V=[];const M={components:{LinkSelect:b,LinkSettings:C},props:{value:{type:Object,default:function(){return{type:"url",value:void 0}}},endpoints:Object,width:String,label:String,help:String,disabled:Boolean,required:Boolean,options:Array,settings:Object},data:function(){return{data:this.value,screen:"link"}},computed:{link:{get:function(){return{type:this.data.type,value:this.data.value}},set:function(t){Object.assign(this.data,t)}},settingsData:{get:function(){return{text:this.data.text,popup:this.data.popup,hash:this.data.hash}},set:function(t){Object.assign(this.data,t)}},isMainScreen:function(){return this.screen==="link"},hasSettings:function(){return this.settings!==!1}},methods:{emitInput:function(){this.$emit("input",this.data)},switchScreen:function(){this.screen=this.isMainScreen?"options":"link"}},watch:{value:function(t){this.data=Object.assign({},t)}}},d={};var R=o(M,T,V,!1,A,null,null,null);function A(t){for(let n in d)this[n]=d[n]}var E=function(){return R.exports}(),F=function(){var t=this,n=t.$createElement,e=t._self._c||n;return t.linkValue?e("div",[t.isArray(t.linkValue)?[t.linkType==="page"?e("k-pages-field-preview",t._b({attrs:{value:t.linkValue}},"k-pages-field-preview",t.$props,!1)):t.linkType==="file"?e("k-files-field-preview",t._b({attrs:{value:t.linkValue}},"k-files-field-preview",t.$props,!1)):t._e()]:e("p",{staticClass:"k-structure-table-text k-url-field-preview"},[t.linkType==="url"?e("a",{staticClass:"k-link",attrs:{href:t.linkValue,target:"_blank"},on:{click:t.handleClick}},[t._v(" "+t._s(t.value.text||t.linkValue)+" ")]):[t.value.text?[e("strong",[t._v(t._s(t.value.text))]),t._v(" "+t._s(t.linkValue)+" ")]:[t._v(" "+t._s(t.linkValue)+" ")]]],2)],2):t._e()},L=[];const D={props:{value:Object,field:Object},computed:{linkType:function(){return this.value&&this.value.type},linkValue:function(){return this.value&&this.value.value}},methods:{isArray:Array.isArray,handleClick:function(t){t.stopImmediatePropagation()}}},p={};var I=o(D,F,L,!1,P,null,null,null);function P(t){for(let n in p)this[n]=p[n]}var W=function(){return I.exports}();panel.plugin("oblik/link-field",{fields:{link:E},components:{"k-link-field-preview":W}})})();
