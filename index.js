(function(){"use strict";var k=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("k-grid",[e.showSelect?t("k-column",{attrs:{width:e.uiWidth.select}},[t("k-select-field",{attrs:{type:"select",value:e.linkType,options:e.linkTypeOptions,empty:!1},on:{input:e.handleTypeSelect}})],1):e._e(),t("k-column",{attrs:{width:e.uiWidth.field}},[e.linkType==="url"?t("k-url-field",{attrs:{value:e.linkValue,placeholder:"https://example.com/"},on:{input:e.handleValueInput}}):e.linkType==="page"?t("k-pages-field",e._b({attrs:{value:e.linkValue,endpoints:{field:this.endpoints.field+"/link-pages"}},on:{input:e.handleValueInput}},"k-pages-field",e.pages,!1)):e.linkType==="file"?t("k-files-field",e._b({attrs:{value:e.linkValue,endpoints:{field:this.endpoints.field+"/link-files"}},on:{input:e.handleValueInput}},"k-files-field",e.files,!1)):e.linkType==="email"?t("k-email-field",{attrs:{value:e.linkValue},on:{input:e.handleValueInput}}):e.linkType==="tel"?t("k-tel-field",{attrs:{value:e.linkValue},on:{input:e.handleValueInput}}):t("k-box",{attrs:{theme:"negative",text:e.$t("error.type",{type:e.linkType})}})],1)],1)},m=[],X="";function r(e,n,t,u,a,_,f,N){var i=typeof e=="function"?e.options:e;n&&(i.render=n,i.staticRenderFns=t,i._compiled=!0),u&&(i.functional=!0),_&&(i._scopeId="data-v-"+_);var s;if(f?(s=function(l){l=l||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,!l&&typeof __VUE_SSR_CONTEXT__!="undefined"&&(l=__VUE_SSR_CONTEXT__),a&&a.call(this,l),l&&l._registeredComponents&&l._registeredComponents.add(f)},i._ssrRegister=s):a&&(s=N?function(){a.call(this,(i.functional?this.parent:this).$root.$options.shadowRoot)}:a),s)if(i.functional){i._injectStyles=s;var B=i.render;i.render=function(U,h){return s.call(h),B(U,h)}}else{var v=i.beforeCreate;i.beforeCreate=v?[].concat(v,s):[s]}return{exports:e,options:i}}const y={props:{value:Object,endpoints:Object,width:String,linkTypes:Array,pages:Object,files:Object},computed:{linkType(){return this.value.type},linkValue(){return this.value.value},showSelect(){return this.linkTypeOptions.length>1},widthPercent(){let e=this.width.split("/"),n=e[0]||1,t=e[1]||1;return n/t*100},uiWidth(){let e=this.widthPercent>=50;return{select:e?"1/4":"1/1",field:this.showSelect?e?"3/4":"1/1":null}},linkTypeOptions(){return this.linkTypes.map(e=>({value:e,text:this.$t(e)}))}},methods:{handleTypeSelect(e){this.$emit("input",{type:e,value:void 0})},handleValueInput(e){this.$emit("input",{value:e})}}},o={};var g=r(y,k,m,!1,$,"424f8b90",null,null);function $(e){for(let n in o)this[n]=o[n]}var b=function(){return g.exports}(),T=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"k-structure-form"},[t("section",[t("k-form",{staticClass:"k-structure-form-fields",attrs:{fields:e.settings},on:{input:e.handleInput},model:{value:e.value,callback:function(u){e.value=u},expression:"value"}})],1)])},V=[];const S={props:{value:Object,settings:Object},created(){for(let e in this.settings)for(let n in this.settings[e]){let t=this.settings[e][n];typeof t!="string"||t[0]!=="$"||(this.settings[e][n]=this.$t(t.substr(1)))}},methods:{handleInput(e){this.$emit("input",e)}}},p={};var w=r(S,T,V,!1,O,null,null,null);function O(e){for(let n in p)this[n]=p[n]}var C=function(){return w.exports}(),j=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("k-field",e._b({staticClass:"k-link-field"},"k-field",e.$props,!1),[e.settings?t("k-button",{attrs:{slot:"options",icon:e.isMainScreen?"cog":"cancel"},on:{click:function(u){e.screen=e.isMainScreen?"options":"link"}},slot:"options"},[e._v(" "+e._s(e.isMainScreen?e.$t("label.settings"):e.$t("label.close"))+" ")]):e._e(),e.isMainScreen?t("LinkSelect",{attrs:{value:e.validValue,width:e.width,required:e.required,endpoints:e.endpoints,linkTypes:e.linkTypes,pages:e.pages,files:e.files},on:{input:e.handleInput}}):t("LinkSettings",{attrs:{value:e.validValue,settings:e.settings},on:{input:e.handleInput}})],1)},I=[];const x={components:{LinkSelect:b,LinkSettings:C},props:{value:[Object,String],endpoints:Object,width:String,label:String,help:String,disabled:Boolean,required:Boolean,linkTypes:Array,settings:Object,pages:Object,files:Object},data(){return{screen:"link"}},computed:{validValue(){return!this.value||!this.linkTypes.includes(this.value.type)?{type:this.linkTypes[0]}:{...this.value}},isMainScreen(){return this.screen==="link"}},methods:{handleInput(e){this.$emit("input",{...this.validValue,...e})}}},c={};var M=r(x,j,I,!1,R,null,null,null);function R(e){for(let n in c)this[n]=c[n]}var L=function(){return M.exports}(),A=function(){var e=this,n=e.$createElement,t=e._self._c||n;return e.linkValue?t("div",[e.isArray(e.linkValue)?[e.linkType==="page"?t("k-pages-field-preview",e._b({attrs:{value:e.linkValue}},"k-pages-field-preview",e.$props,!1)):e.linkType==="file"?t("k-files-field-preview",e._b({attrs:{value:e.linkValue}},"k-files-field-preview",e.$props,!1)):e._e()]:t("p",{staticClass:"k-structure-table-text k-url-field-preview"},[e.linkType==="url"?t("a",{staticClass:"k-link",attrs:{href:e.linkValue,target:"_blank"},on:{click:e.handleLinkClick}},[e._v(" "+e._s(e.value.text||e.linkValue)+" ")]):[e.value.text?[t("strong",[e._v(e._s(e.value.text))]),e._v(" "+e._s(e.linkValue)+" ")]:[e._v(" "+e._s(e.linkValue)+" ")]]],2)],2):e._e()},E=[];const F={props:{value:Object,field:Object},computed:{linkType(){return this.value.type},linkValue(){return this.value.value}},methods:{isArray:Array.isArray,handleLinkClick(e){e.stopImmediatePropagation()}}},d={};var P=r(F,A,E,!1,W,null,null,null);function W(e){for(let n in d)this[n]=d[n]}var q=function(){return P.exports}();panel.plugin("oblik/link-field",{fields:{link:L},components:{"k-link-field-preview":q}})})();
